require=function i(c,a,s){function u(t,e){if(!a[t]){if(!c[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(d)return d(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=a[t]={exports:{}};c[t][0].call(r.exports,function(e){return u(c[t][1][e]||e)},r,r.exports,i,c,a,s)}return a[t].exports}for(var d="function"==typeof require&&require,e=0;e<s.length;e++)u(s[e]);return u}({Background:[function(e,t,n){"use strict";cc._RF.push(t,"ec196HQwa1K/ovdiqSakmGR","Background"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../utils/loader"),r=function(t){function e(){var e=t.call(this)||this;return e.bgImg=e.addComponent(cc.Sprite),e.widget=e.addComponent(cc.Widget),e.name="Background",e.loadBgImg(),e}return __extends(e,t),e.prototype.loadBgImg=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,o.loadRes("texture/background")];case 1:return t=e.sent(),this.bgImg.spriteFrame=new cc.SpriteFrame(t),this.width=1360,this.height=760,[2]}})})},e}(cc.Node);n.default=r,cc._RF.pop()},{"../utils/loader":"loader"}],Game:[function(e,t,n){"use strict";cc._RF.push(t,"050cat9DlNF053KRYj/GHON","Game"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Background"),r=e("./Ground"),i=e("./PlayerNode"),c=e("./Star"),a=e("./Score"),s=e("../utils/loader"),u=cc._decorator.ccclass,d=function(t){function e(){var e=t.call(this)||this;return e.background=null,e.ground=null,e.playerNode=null,e.starNode=null,e.prefabStar=null,e.scoreNode=null,e.scoreAudio=null,e.maxStarDuration=0,e.minStarDuration=0,e.score=0,e.timer=0,e.starDuration=3,e.restart=!1,n.instance=e}var n;return __extends(e,t),(n=e).prototype.onLoad=function(){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(e){switch(e.label){case 0:return this.node.addChild(this.background=new o.default),this.node.addChild(this.ground=new r.default),this.node.addChild(this.playerNode=new i.default),this.node.addChild(this.scoreNode=new a.default),t=this,[4,s.loadRes("prefabs/star")];case 1:return t.starNode=e.sent(),n=this,[4,s.loadRes("audio/score")];case 2:return n.scoreAudio=e.sent(),this.spawnNewStar(),[2]}})})},e.prototype.update=function(e){this.timer>this.starDuration?this.gameOver():this.timer+=e},e.prototype.spawnNewStar=function(t){return void 0===t&&(t=!0),__awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.prefabStar=cc.instantiate(this.starNode),this.prefabStar.addComponent(c.default),this.node.addChild(this.prefabStar),this.prefabStar.setPosition(this.getNewStarPosition()),t&&(this.timer=0),[2]})})},e.prototype.getNewStarPosition=function(){var e,t=this.ground.y+this.ground.height/2+Math.random()*this.playerNode.getComponent("Player").jumpHeight,n=this.node.width/2;return e=2*(Math.random()-.5)*n,cc.v2(e,t)},e.prototype.gainScore=function(){this.score+=1,this.scoreNode.setScore(this.score),cc.audioEngine.play(this.scoreAudio,!1,1)},e.prototype.gameOver=function(){console.log("gameover"),this.score=0,this.timer=0,this.scoreNode.setScore(this.score)},e.instance=null,e=n=__decorate([u],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../utils/loader":"loader","./Background":"Background","./Ground":"Ground","./PlayerNode":"PlayerNode","./Score":"Score","./Star":"Star"}],Ground:[function(e,t,n){"use strict";cc._RF.push(t,"54301sxoIdDVZwMTubhZcbK","Ground"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../utils/loader"),r=function(t){function e(){var e=t.call(this)||this;return e.bgImg=e.addComponent(cc.Sprite),e.name="Ground",e.loadBg(),e}return __extends(e,t),e.prototype.loadBg=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,o.loadRes("texture/ground")];case 1:return t=e.sent(),this.bgImg.spriteFrame=new cc.SpriteFrame(t),this.width=1360,this.height=160,this.y=-240,[2]}})})},e}(cc.Node);n.default=r,cc._RF.pop()},{"../utils/loader":"loader"}],Main:[function(e,t,n){"use strict";cc._RF.push(t,"558d1d+Mx9G6KEZzjUndD3I","Main"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator.ccclass,r=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.start=function(){},t=__decorate([o],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],PlayerNode:[function(e,t,n){"use strict";cc._RF.push(t,"ab0472CxzlFhbf7jFfCFxtS","PlayerNode"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Player"),r=e("../utils/loader"),i=cc._decorator.ccclass,c=function(t){function e(){var e=t.call(this)||this;return e.player=e.addComponent(o.default),e.bgImg=e.addComponent(cc.Sprite),e.name="Player",e.loadPlayer(),e.y=-130,e}return __extends(e,t),e.prototype.loadPlayer=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,r.loadRes("texture/PurpleMonster")];case 1:return t=e.sent(),this.bgImg.spriteFrame=new cc.SpriteFrame(t),[2]}})})},e=__decorate([i],e)}(cc.Node);n.default=c,cc._RF.pop()},{"../utils/loader":"loader","./Player":"Player"}],Player:[function(e,t,n){"use strict";cc._RF.push(t,"73f12Ihe2pNXqXqOQeF8Vdz","Player"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../utils/loader"),r=cc._decorator.ccclass,i=function(t){function e(){var e=t.call(this)||this;return e.jumpHeight=200,e.jumpDuration=.5,e.maxMoveSpeed=400,e.accel=350,e.accLeft=!1,e.accRight=!1,e.xSpeed=0,e.jumpAudio=null,e}return __extends(e,t),e.prototype.onLoad=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return this.node.runAction(this.setJumpAction()),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),t=this,[4,o.loadRes("audio/jump",cc.AudioClip)];case 1:return t.jumpAudio=e.sent(),[2]}})})},e.prototype.update=function(e){this.accLeft?this.xSpeed-=this.accel*e:this.accRight&&(this.xSpeed+=this.accel*e),Math.abs(this.xSpeed)>this.maxMoveSpeed&&(this.xSpeed=this.maxMoveSpeed*this.xSpeed/Math.abs(this.xSpeed)),this.node.x+=this.xSpeed*e},e.prototype.setJumpAction=function(){var e=cc.moveBy(this.jumpDuration,cc.v2(0,this.jumpHeight)).easing(cc.easeCubicActionOut()),t=cc.moveBy(this.jumpDuration,cc.v2(0,-this.jumpHeight)).easing(cc.easeCubicActionIn()),n=cc.callFunc(this.playJumpSound,this);return cc.repeatForever(cc.sequence(e,t,n))},e.prototype.playJumpSound=function(){cc.audioEngine.play(this.jumpAudio,!1,1)},e.prototype.onKeyDown=function(e){switch(Number(e.keyCode)){case 37:this.accLeft=!0;break;case 39:this.accRight=!0}},e.prototype.onKeyUp=function(e){switch(Number(e.keyCode)){case 37:this.accLeft=!1;break;case 39:this.accRight=!1}},e=__decorate([r],e)}(cc.Component);n.default=i,cc._RF.pop()},{"../utils/loader":"loader"}],Score:[function(e,t,n){"use strict";cc._RF.push(t,"04ce90vjHRKLY3+EHKAxxAG","Score"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../utils/loader"),r=function(t){function e(){var e=t.call(this)||this;return e.scoreDisplay=e.addComponent(cc.Label),e.y=200,e.init(),e}return __extends(e,t),e.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return this.scoreDisplay.string="Score: 0",this.scoreDisplay.fontSize=40,t=this.scoreDisplay,[4,o.loadRes("font/mikado_outline_shadow",cc.Font)];case 1:return t.font=e.sent(),this.scoreDisplay.string="Score: 0",[2]}})})},e.prototype.setScore=function(e){this.scoreDisplay.string="Score: "+e},e}(cc.Node);n.default=r,cc._RF.pop()},{"../utils/loader":"loader"}],Star:[function(e,t,n){"use strict";cc._RF.push(t,"3b288wIBwRGaoXSS2KYK6O3","Star"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Game"),r=function(t){function e(){var e=t.call(this)||this;return e.pickRadius=60,e}return __extends(e,t),e.prototype.update=function(){if(this.getPlayerDistance()<this.pickRadius)this.onPicked();else{var e=1-o.default.instance.timer/o.default.instance.starDuration;this.node.opacity=50+Math.floor(205*e),o.default.instance.timer>o.default.instance.starDuration&&(o.default.instance.spawnNewStar(!1),this.node.destroy())}},e.prototype.getPlayerDistance=function(){var e=o.default.instance.playerNode.getPosition();return this.node.position.sub(e).mag()},e.prototype.onPicked=function(){o.default.instance.spawnNewStar(),o.default.instance.gainScore(),this.node.destroy()},e.prototype.reSpawn=function(){o.default.instance.spawnNewStar(),this.node.destroy()},e}(cc.Component);n.default=r,cc._RF.pop()},{"./Game":"Game"}],helper:[function(e,t,n){"use strict";cc._RF.push(t,"d33975HKzNM1ZukXRjqQKKI","helper"),Object.defineProperty(n,"__esModule",{value:!0});var r=function(n){function e(e){var t=n.call(this)||this;return t.shape=t.addComponent(cc.Graphics),t.instance=null,t.name="RectArea",t.instance=e,t.opacity=100,t.setRect(),t}return __extends(e,n),e.prototype.setRect=function(){var e=this.instance,t=e.width,n=e.height;this.shape.fillColor=new cc.Color(255,255,255,100),this.shape.fillRect(-t/2,-n/2,t,n),this.shape.strokeColor=cc.Color.WHITE,this.shape.stroke()},e}(cc.Node),i=function(n){function e(e){var t=n.call(this)||this;return t.shape=t.addComponent(cc.Graphics),t.instance=null,t.name="InfoBox",t.instance=e,t.opacity=100,t.setRect(),t}return __extends(e,n),e.prototype.setRect=function(){var e=this.instance,t=e.width,n=e.height;this.shape.fillColor=new cc.Color(0,255,255,100),this.shape.fillRect(-t/2,n/2,100,60),this.shape.strokeColor=cc.Color.WHITE,this.shape.stroke()},e}(cc.Node),c=function(n){function e(e){var t=n.call(this)||this;return t.text=t.addComponent(cc.Label),t.instance=null,t.name="Info",t.instance=e,t.setInfo(),t}return __extends(e,n),e.prototype.setInfo=function(){var e=this.instance,t=e.x,n=e.y,o=e.width,r=e.height;this.x=-o/2+20,this.y=r/2+30,this.text.string="\n      x: "+t.toFixed(2)+"\n      y: "+n.toFixed(2)+"\n      width: "+o+"\n      height: "+r+"\n    ",this.text.fontSize=12,this.text.lineHeight=14},e.prototype.updateInfo=function(e){this.text.string="\n      x: "+e.x.toFixed(2)+"\n      y: "+e.y.toFixed(2)+"\n      width: "+this.instance.width+"\n      height: "+this.instance.height+"\n    "},e}(cc.Node);n.default=function(o){return function(n){return function(e){function t(){var t=e.call(this)||this;return t.rectArea=null,t.infoBox=null,t.info=null,t.dragable=!1,t.name=n.name,o&&(t.on("mouseenter",function(){t.addChild(t.rectArea=new r(t)),t.addChild(t.infoBox=new i(t)),t.addChild(t.info=new c(t))}),t.on("mouseleave",function(){t.rectArea.destroy(),t.infoBox.destroy(),t.info.destroy()}),t.on("mousedown",function(){t.on("mousemove",t._updatePosition)}),t.on("mouseup",function(){t.off("mousemove",t._updatePosition)}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){91===e.keyCode&&(t.dragable=!0)}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,function(e){91===e.keyCode&&(t.dragable=!1)})),t}return __extends(t,e),t.prototype._updatePosition=function(e){this.dragable&&(this.x+=e.getDelta().x,this.y+=e.getDelta().y,this.info.updateInfo({x:this.x,y:this.y}))},t}(n)}},cc._RF.pop()},{}],loader:[function(e,t,n){"use strict";cc._RF.push(t,"4dc6arVpgJOzoGpLyabwN5W","loader"),Object.defineProperty(n,"__esModule",{value:!0}),n.loadRes=function(e,t){return void 0===t&&(t=null),new Promise(function(n,o){cc.loader.loadRes(e,t,function(e,t){e&&o(e),n(t)})})},cc._RF.pop()},{}]},{},["Background","Game","Ground","Main","Player","PlayerNode","Score","Star","helper","loader"]);